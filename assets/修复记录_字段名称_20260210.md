# 修复记录 - 订单打印字段名称错误

## 问题描述

打印订单时显示：
- 订单号：`undefined`
- 订单状态：`undefined`

## 根本原因

传菜员打印订单函数 `printWaiterOrder` 中使用了错误的字段名称：
- `order.order_id` → 应该是 `order.order_number`
- `order.order_status` → 应该是 `order.status`

## API 返回的字段定义

根据 `OrderResponse` 模型定义：
```python
class OrderResponse(BaseModel):
    id: int
    order_number: str  # ✅ 正确的订单号字段
    store_id: int
    table_id: int
    table_number: str
    total_amount: float
    payment_method: str
    payment_status: str
    status: str  # ✅ 正确的订单状态字段
    created_at: str
    items: List[OrderItemResponse]
```

## 修复方案

### 修改位置
文件：`assets/staff_workflow.html`
行号：1276, 1279

### 修改前
```javascript
<p><strong>订单号：</strong>${order.order_id}</p>
...
<p><strong>订单状态：</strong>${this.getOrderStatusText(order.order_status)}</p>
```

### 修改后
```javascript
<p><strong>订单号：</strong>${order.order_number}</p>
...
<p><strong>订单状态：</strong>${this.getOrderStatusText(order.status)}</p>
```

## 影响范围

- ✅ 传菜员打印订单（已修复）
- ✅ 厨师打印订单（已使用正确字段，无需修改）

## 测试验证

打印订单应该正确显示：
- 订单号：例如 "ORD-20260210-001"
- 订单状态：例如 "制作中"、"已完成"

---

**修复时间**：2026-02-10 21:43
**修复人**：Coze Coding
**状态**：已完成，待部署
