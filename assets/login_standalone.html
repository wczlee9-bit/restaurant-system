<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁôªÂΩï - Login</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <script src="https://unpkg.com/element-plus/dist/index.full.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 60px 50px;
            width: 100%;
            max-width: 420px;
            position: relative;
        }

        .language-switch {
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .language-switch button {
            background: transparent;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .language-switch button:hover {
            background: #667eea;
            color: white;
        }

        .language-switch button.active {
            background: #667eea;
            color: white;
        }

        .logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo h1 {
            font-size: 28px;
            color: #667eea;
            margin-bottom: 10px;
        }

        .logo p {
            color: #999;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        .form-group input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
            outline: none;
        }

        .form-group input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .login-button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .login-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
        }

        .login-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .forgot-password {
            text-align: center;
            margin-top: 20px;
        }

        .forgot-password a {
            color: #667eea;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .forgot-password a:hover {
            text-decoration: underline;
        }

        .divider {
            text-align: center;
            margin: 30px 0;
            position: relative;
        }

        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #e0e0e0;
        }

        .back-link {
            text-align: center;
            margin-top: 20px;
        }

        .back-link a {
            color: #667eea;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .back-link a:hover {
            text-decoration: underline;
        }

        @media (max-width: 480px) {
            .login-container {
                padding: 40px 30px;
                margin: 20px;
            }

            .logo h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="login-container">
            <!-- ËØ≠Ë®ÄÂàáÊç¢ -->
            <div class="language-switch">
                <button
                    :class="{ active: currentLanguage === 'zh' }"
                    @click="switchLanguage('zh')"
                >
                    ‰∏≠Êñá
                </button>
                <button
                    :class="{ active: currentLanguage === 'en' }"
                    @click="switchLanguage('en')"
                >
                    EN
                </button>
            </div>

            <!-- Logo -->
            <div class="logo">
                <h1>{{ texts.logoTitle }}</h1>
                <p>{{ texts.logoSubtitle }}</p>
            </div>

            <!-- ÁôªÂΩïË°®Âçï -->
            <div class="form-group">
                <label>{{ texts.usernameLabel }}</label>
                <input
                    type="text"
                    v-model="form.username"
                    :placeholder="texts.usernamePlaceholder"
                    @keyup.enter="handleLogin"
                >
            </div>

            <div class="form-group">
                <label>{{ texts.passwordLabel }}</label>
                <input
                    type="password"
                    v-model="form.password"
                    :placeholder="texts.passwordPlaceholder"
                    @keyup.enter="handleLogin"
                >
            </div>

            <button
                class="login-button"
                @click="handleLogin"
                :disabled="loading"
            >
                {{ loading ? texts.loading : texts.loginButton }}
            </button>

            <div class="forgot-password">
                <a href="#" @click.prevent="showForgotPassword">{{ texts.forgotPassword }}</a>
            </div>

            <!-- ËøîÂõûÈ¶ñÈ°µ -->
            <div class="back-link">
                <a href="index.html">‚Üê {{ texts.backToHome }}</a>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, reactive, computed, onMounted } = Vue;

        createApp({
            setup() {
                const currentLanguage = ref('zh');
                const loading = ref(false);

                const form = reactive({
                    username: '',
                    password: ''
                });

                // ‰∏≠Ëã±ÊñáÊñáÊú¨
                const textsMap = {
                    zh: {
                        logoTitle: 'Êâ´Á†ÅÁÇπÈ§êÁ≥ªÁªü',
                        logoSubtitle: 'Â∑•‰Ωú‰∫∫ÂëòÁôªÂΩï',
                        usernameLabel: 'Áî®Êà∑Âêç',
                        usernamePlaceholder: 'ËØ∑ËæìÂÖ•Áî®Êà∑Âêç',
                        passwordLabel: 'ÂØÜÁ†Å',
                        passwordPlaceholder: 'ËØ∑ËæìÂÖ•ÂØÜÁ†Å',
                        loginButton: 'ÁôªÂΩï',
                        loading: 'ÁôªÂΩï‰∏≠...',
                        forgotPassword: 'ÂøòËÆ∞ÂØÜÁ†ÅÔºü',
                        divider: 'Êàñ‰ΩøÁî®ÊºîÁ§∫Ë¥¶Âè∑',
                        demoAccountsTitle: 'ÊºîÁ§∫Ë¥¶Âè∑',
                        username: 'Áî®Êà∑Âêç',
                        password: 'ÂØÜÁ†Å',
                        backToHome: 'ËøîÂõûÈ¶ñÈ°µ',
                        loginSuccess: 'ÁôªÂΩïÊàêÂäü',
                        loginFailed: 'Áî®Êà∑ÂêçÊàñÂØÜÁ†ÅÈîôËØØ',
                        errorOccurred: 'ÁôªÂΩïÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï'
                    },
                    en: {
                        logoTitle: 'Restaurant POS System',
                        logoSubtitle: 'Staff Login',
                        usernameLabel: 'Username',
                        usernamePlaceholder: 'Enter username',
                        passwordLabel: 'Password',
                        passwordPlaceholder: 'Enter password',
                        loginButton: 'Login',
                        loading: 'Logging in...',
                        forgotPassword: 'Forgot password?',
                        divider: 'Or use demo accounts',
                        demoAccountsTitle: 'Demo Accounts',
                        username: 'Username',
                        password: 'Password',
                        backToHome: 'Back to Home',
                        loginSuccess: 'Login successful',
                        loginFailed: 'Invalid username or password',
                        errorOccurred: 'Login failed, please try again later'
                    }
                };

                // ÊºîÁ§∫Áî®Êà∑ÔºàÂÜÖËÅîÊï∞ÊçÆÔºå‰∏ç‰æùËµñÂ§ñÈÉ®Êñá‰ª∂Ôºâ
                const demoUsers = [
                    {
                        username: 'system_admin',
                        password: 'admin123',
                        icon: 'üëë',
                        name: {
                            zh: 'Á≥ªÁªüÁÆ°ÁêÜÂëò',
                            en: 'System Admin'
                        },
                        role: 'system_admin'
                    },
                    {
                        username: 'company',
                        password: 'company123',
                        icon: 'üè¢',
                        name: {
                            zh: 'ÊÄªÂÖ¨Âè∏',
                            en: 'Company HQ'
                        },
                        role: 'company'
                    },
                    {
                        username: 'admin',
                        password: 'admin123',
                        icon: 'üëî',
                        name: {
                            zh: 'Â∫óÈïø',
                            en: 'Manager'
                        },
                        role: 'manager'
                    },
                    {
                        username: 'chef',
                        password: 'chef123',
                        icon: 'üë®‚Äçüç≥',
                        name: {
                            zh: 'Âé®Â∏à',
                            en: 'Chef'
                        },
                        role: 'chef'
                    },
                    {
                        username: 'waiter',
                        password: 'waiter123',
                        icon: 'ü§µ',
                        name: {
                            zh: '‰º†ËèúÂëò',
                            en: 'Waiter'
                        },
                        role: 'waiter'
                    },
                    {
                        username: 'cashier',
                        password: 'cashier123',
                        icon: 'üí∞',
                        name: {
                            zh: 'Êî∂Èì∂Âëò',
                            en: 'Cashier'
                        },
                        role: 'cashier'
                    }
                ];

                // ËÆ°ÁÆóÂΩìÂâçËØ≠Ë®ÄÊñáÊú¨
                const texts = computed(() => textsMap[currentLanguage.value]);

                // ÂàáÊç¢ËØ≠Ë®Ä
                const switchLanguage = (lang) => {
                    currentLanguage.value = lang;
                    localStorage.setItem('language', lang);
                };

                // ÁôªÂΩïÂ§ÑÁêÜ
                const handleLogin = async () => {
                    if (!form.username || !form.password) {
                        alert(texts.value.usernameLabel + 'Âíå' + texts.value.passwordLabel + '‰∏çËÉΩ‰∏∫Á©∫');
                        return;
                    }

                    loading.value = true;

                    try {
                        // Êú¨Âú∞È™åËØÅÔºàÂÜÖËÅîÊï∞ÊçÆÔºâ
                        const user = demoUsers.find(
                            u => u.username === form.username && u.password === form.password
                        );

                        if (user) {
                            // ÁôªÂΩïÊàêÂäü
                            localStorage.setItem('currentUser', JSON.stringify({
                                username: user.username,
                                role: user.role,
                                name: user.name[currentLanguage.value] || user.username,
                                loginTime: new Date().toISOString()
                            }));

                            ElementPlus.ElMessage.success(texts.value.loginSuccess);

                            // Âª∂ËøüË∑≥ËΩ¨
                            setTimeout(() => {
                                window.location.href = 'staff_workflow.html';
                            }, 500);
                        } else {
                            ElementPlus.ElMessage.error(texts.value.loginFailed);
                        }
                    } catch (error) {
                        console.error('ÁôªÂΩïÈîôËØØ:', error);
                        ElementPlus.ElMessage.error(texts.value.errorOccurred);
                    } finally {
                        loading.value = false;
                    }
                };

                // ÂøòËÆ∞ÂØÜÁ†Å
                const showForgotPassword = () => {
                    alert(texts.value.forgotPassword + '\n\nËØ∑ËÅîÁ≥ªÁ≥ªÁªüÁÆ°ÁêÜÂëòÈáçÁΩÆÂØÜÁ†Å\n\nPlease contact system administrator to reset password');
                };

                // ÂàùÂßãÂåñ
                onMounted(() => {
                    // ‰ªéÊú¨Âú∞Â≠òÂÇ®ËØªÂèñËØ≠Ë®ÄËÆæÁΩÆ
                    const savedLanguage = localStorage.getItem('language');
                    if (savedLanguage) {
                        currentLanguage.value = savedLanguage;
                    }

                    // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁôªÂΩï
                    const currentUser = localStorage.getItem('currentUser');
                    if (currentUser) {
                        // Â∑≤ÁôªÂΩïÔºåÁõ¥Êé•Ë∑≥ËΩ¨
                        window.location.href = 'staff_workflow.html';
                    }

                    // Ê£ÄÊü• ElementPlus ÊòØÂê¶Âä†ËΩΩÊàêÂäü
                    if (typeof ElementPlus === 'undefined') {
                        console.error('ElementPlus Êú™Âä†ËΩΩÊàêÂäü');
                        alert('È°µÈù¢Âä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•ÂêéÂà∑Êñ∞È°µÈù¢\n\nPage load failed, please check your network connection and refresh');
                    }
                });

                return {
                    currentLanguage,
                    loading,
                    texts,
                    form,
                    demoUsers,
                    switchLanguage,
                    handleLogin,
                    showForgotPassword
                };
            }
        }).use(ElementPlus).mount('#app');
    </script>
</body>
</html>
