# è®¢å•æäº¤å¤±è´¥é—®é¢˜è¯Šæ–­ä¸è§£å†³æ–¹æ¡ˆ

## ğŸ“‹ é—®é¢˜åˆ†æ

### é—®é¢˜ç°è±¡
- å‰ç«¯é¡µé¢æäº¤è®¢å•åæ— ååº”
- API æµ‹è¯•å¤±è´¥

### æ ¹æœ¬åŸå› 
1. **Netlify å‰ç«¯é…ç½®æŒ‡å‘ç”Ÿäº§æœåŠ¡å™¨**ï¼šå½“å‰ Netlify çš„ä»£ç†é…ç½®æŒ‡å‘ `115.191.1.219:8000/8001`
2. **ç”Ÿäº§æœåŠ¡å™¨åç«¯æœåŠ¡æœªè¿è¡Œ**ï¼š`115.191.1.219` ä¸Šçš„åç«¯ API æœåŠ¡ï¼ˆç«¯å£ 8000 å’Œ 8001ï¼‰æ²¡æœ‰è¿è¡Œ
3. **å‰ç«¯æ— æ³•è¿æ¥åˆ°åç«¯**ï¼šå‰ç«¯å°è¯•é€šè¿‡ Netlify ä»£ç†è®¿é—®åç«¯ APIï¼Œä½†åç«¯æœåŠ¡ä¸å¯ç”¨

### éªŒè¯ç»“æœ
âœ… **æ²™ç›’ç¯å¢ƒåç«¯æœåŠ¡å·²å¯åŠ¨**ï¼š`localhost:8000` æ­£å¸¸è¿è¡Œ
âœ… **è®¢å• API æµ‹è¯•é€šè¿‡**ï¼šæˆåŠŸåˆ›å»ºè®¢å• `ORD202601110054221097`
âœ… **æ•°æ®åº“è¿æ¥æ­£å¸¸**ï¼šå¯ä»¥æ­£å¸¸è¯»å†™æ•°æ®

## ğŸš€ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šåœ¨æ²™ç›’ç¯å¢ƒæœ¬åœ°æµ‹è¯•ï¼ˆæ¨èç”¨äºå¼€å‘æµ‹è¯•ï¼‰

**ä¼˜åŠ¿**ï¼š
- æ— éœ€å¤–éƒ¨æœåŠ¡å™¨
- å¿«é€ŸéªŒè¯åŠŸèƒ½
- é€‚åˆå¼€å‘è°ƒè¯•

**æ­¥éª¤**ï¼š

1. **ç¡®è®¤æ²™ç›’ç¯å¢ƒåç«¯æœåŠ¡è¿è¡Œ**ï¼š
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
ps aux | grep restaurant_api

# å¦‚æœæœªè¿è¡Œï¼Œå¯åŠ¨æœåŠ¡
nohup python3 -m uvicorn src.api.restaurant_api:app --host 0.0.0.0 --port 8000 --log-level info > logs/restaurant_api_8000.log 2>&1 &
```

2. **åœ¨æœ¬åœ°æµè§ˆå™¨æ‰“å¼€å‰ç«¯é¡µé¢**ï¼š
   - ç›´æ¥æ‰“å¼€ `assets/customer_order_v3.html` æ–‡ä»¶
   - æˆ–ä½¿ç”¨æœ¬åœ° HTTP æœåŠ¡å™¨ï¼š
     ```bash
     cd assets
     python3 -m http.server 8080
     ```
   - ç„¶åè®¿é—® `http://localhost:8080/customer_order_v3.html`

3. **ä¿®æ”¹å‰ç«¯ API é…ç½®**ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š
   - å‰ç«¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `/api/*`ï¼Œä¼šè‡ªåŠ¨è¯·æ±‚å½“å‰åŸŸåçš„ API
   - åœ¨æœ¬åœ°æµ‹è¯•æ—¶ï¼Œç¡®ä¿å‰ç«¯å’Œåç«¯åœ¨åŒä¸€åŸŸåä¸‹

### æ–¹æ¡ˆ 2ï¼šåœ¨ç”Ÿäº§æœåŠ¡å™¨å¯åŠ¨åç«¯æœåŠ¡ï¼ˆæ¨èç”¨äºç”Ÿäº§éƒ¨ç½²ï¼‰

**ä¼˜åŠ¿**ï¼š
- å®Œæ•´çš„ç”Ÿäº§ç¯å¢ƒ
- å¯ä»¥ä»å…¬ç½‘è®¿é—®
- é€‚åˆæ­£å¼ä½¿ç”¨

**æ­¥éª¤**ï¼š

1. **SSH ç™»å½•åˆ°ç”Ÿäº§æœåŠ¡å™¨**ï¼š
```bash
ssh root@115.191.1.219
```

2. **æ‹‰å–æœ€æ–°ä»£ç **ï¼š
```bash
cd /path/to/restaurant-system
git pull origin main
```

3. **å®‰è£…ä¾èµ–**ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š
```bash
pip install -r requirements.txt
```

4. **å¯åŠ¨åç«¯æœåŠ¡**ï¼š
```bash
# å¯åŠ¨ä¸» API (ç«¯å£ 8000)
nohup python3 -m uvicorn src.api.restaurant_api:app --host 0.0.0.0 --port 8000 --log-level info > logs/restaurant_api_8000.log 2>&1 &

# å¯åŠ¨é¡¾å®¢ API (ç«¯å£ 8001)
nohup python3 -m uvicorn src.api.customer_api:app --host 0.0.0.0 --port 8001 --log-level info > logs/customer_api_8001.log 2>&1 &
```

5. **éªŒè¯æœåŠ¡è¿è¡Œ**ï¼š
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
ps aux | grep uvicorn

# æµ‹è¯• API
curl http://localhost:8000/api/tables/
curl http://localhost:8000/api/menu-items/
```

6. **é…ç½®é˜²ç«å¢™**ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š
```bash
# å…è®¸ 8000 å’Œ 8001 ç«¯å£è®¿é—®
firewall-cmd --permanent --add-port=8000/tcp
firewall-cmd --permanent --add-port=8001/tcp
firewall-cmd --reload
```

7. **éªŒè¯ Netlify ä»£ç†**ï¼š
   - è®¿é—® Netlify å‰ç«¯ï¼š`https://mellow-rabanadas-877f3e.netlify.app/customer-order`
   - æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ç½‘ç»œè¯·æ±‚
   - ç¡®è®¤ API è¯·æ±‚æŒ‡å‘ `http://115.191.1.219:8000`

### æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èç”¨äºé•¿æœŸç»´æŠ¤ï¼‰

**ä¼˜åŠ¿**ï¼š
- è‡ªåŠ¨åŒ–éƒ¨ç½²
- ä»£ç å³åŸºç¡€è®¾æ–½
- å›¢é˜Ÿåä½œå‹å¥½

**æ­¥éª¤**ï¼š

å‚è€ƒä»¥ä¸‹æ–‡æ¡£é…ç½® GitHub Actionsï¼š
- [GITHUB_ACTIONS_QUICKSTART.md](GITHUB_ACTIONS_QUICKSTART.md) - 5åˆ†é’Ÿå¿«é€Ÿé…ç½®
- [GITHUB_ACTIONS_STEP_BY_STEP.md](GITHUB_ACTIONS_STEP_BY_STEP.md) - è¯¦ç»†æ­¥éª¤è¯´æ˜

## ğŸ§ª æµ‹è¯•è®¢å•æµç¨‹

### 1. æµ‹è¯• API ç«¯ç‚¹

```bash
# è·å–æ¡Œå·åˆ—è¡¨
curl http://localhost:8000/api/tables/

# è·å–èœå“åˆ—è¡¨
curl http://localhost:8000/api/menu-items/

# åˆ›å»ºè®¢å•
curl -X POST http://localhost:8000/api/orders/ \
  -H "Content-Type: application/json" \
  -d '{
    "table_id": 12,
    "items": [{"menu_item_id": 1, "quantity": 2}]
  }'

# æŸ¥è¯¢è®¢å•
curl http://localhost:8000/api/orders/63
```

### 2. æµ‹è¯•å‰ç«¯è®¢å•æäº¤

1. æ‰“å¼€ `assets/customer_order_v3.html`
2. é€‰æ‹©æ¡Œå·ï¼ˆå¦‚ T02ï¼‰
3. æ·»åŠ èœå“åˆ°è´­ç‰©è½¦
4. ç‚¹å‡»"å»ç»“ç®—"
5. ç‚¹å‡»"ç¡®è®¤ä¸‹å•"
6. åº”è¯¥æ˜¾ç¤ºè®¢å•æˆåŠŸæç¤º

### 3. éªŒè¯æ•°æ®åº“

```bash
# ä½¿ç”¨ psql æŸ¥è¯¢è®¢å•è¡¨
psql -U postgres -d restaurant_db -c "SELECT * FROM orders ORDER BY created_at DESC LIMIT 5;"
```

## ğŸ“ å½“å‰çŠ¶æ€

### âœ… å·²å®Œæˆ
- [x] è¯Šæ–­é—®é¢˜åŸå› 
- [x] åœ¨æ²™ç›’ç¯å¢ƒå¯åŠ¨åç«¯æœåŠ¡ï¼ˆç«¯å£ 8000ï¼‰
- [x] æµ‹è¯•è®¢å• API æˆåŠŸ
- [x] åˆ›å»ºè¯Šæ–­æŠ¥å‘Š

### â³ å¾…å®Œæˆ
- [ ] æ ¹æ®é€‰æ‹©æ–¹æ¡ˆç»§ç»­æ“ä½œ
  - æ–¹æ¡ˆ 1ï¼šåœ¨æœ¬åœ°æµè§ˆå™¨æµ‹è¯•å‰ç«¯
  - æ–¹æ¡ˆ 2ï¼šåœ¨ç”Ÿäº§æœåŠ¡å™¨å¯åŠ¨æœåŠ¡
  - æ–¹æ¡ˆ 3ï¼šé…ç½® GitHub Actions è‡ªåŠ¨éƒ¨ç½²

## ğŸ” æ•…éšœæ’æŸ¥

### å¦‚æœ API ä»ç„¶å¤±è´¥

1. **æ£€æŸ¥æœåŠ¡æ—¥å¿—**ï¼š
```bash
tail -f logs/restaurant_api_8000.log
```

2. **æ£€æŸ¥æ•°æ®åº“è¿æ¥**ï¼š
```bash
psql -U postgres -d restaurant_db -c "SELECT 1;"
```

3. **æ£€æŸ¥ç«¯å£å ç”¨**ï¼š
```bash
lsof -i :8000
```

4. **æ£€æŸ¥é˜²ç«å¢™**ï¼š
```bash
iptables -L -n | grep 8000
firewall-cmd --list-ports
```

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

è¯·é€‰æ‹©ä»¥ä¸‹æ–¹æ¡ˆä¹‹ä¸€ç»§ç»­ï¼š

1. **åœ¨æ²™ç›’ç¯å¢ƒæœ¬åœ°æµ‹è¯•**ï¼šç›´æ¥æ‰“å¼€ `assets/customer_order_v3.html` æµ‹è¯•
2. **åœ¨ç”Ÿäº§æœåŠ¡å™¨å¯åŠ¨æœåŠ¡**ï¼šå‚è€ƒæ–¹æ¡ˆ 2 çš„æ­¥éª¤
3. **é…ç½®è‡ªåŠ¨éƒ¨ç½²**ï¼šå‚è€ƒ GitHub Actions æ–‡æ¡£

---

**é—®é¢˜ä¿®å¤æ—¶é—´**ï¼š2026-01-11
**ä¿®å¤äººå‘˜**ï¼šCoze Coding
**çŠ¶æ€**ï¼šâœ… å·²è¯Šæ–­ï¼Œç­‰å¾…é€‰æ‹©è§£å†³æ–¹æ¡ˆ
