# ä»æ²™ç›’åˆ° Netlify - å®Œæ•´éƒ¨ç½²æµç¨‹

æœ¬æŒ‡å—æ•™ä½ å¦‚ä½•ä»æ²™ç›’ç¯å¢ƒå¼€å‘ä»£ç ï¼Œæ¨é€åˆ° GitHubï¼Œç„¶åè‡ªåŠ¨éƒ¨ç½²åˆ° Netlifyï¼ˆå‰ç«¯ï¼‰å’ŒæœåŠ¡å™¨ï¼ˆåç«¯ï¼‰ã€‚

---

## ğŸ“‹ æ¶æ„è¯´æ˜

```
æ²™ç›’ç¯å¢ƒï¼ˆå¼€å‘ï¼‰
    â†“ git push
GitHubï¼ˆä»£ç ä»“åº“ï¼‰
    â”œâ”€â†’ GitHub Actions â†’ æœåŠ¡å™¨ 115.191.1.219ï¼ˆåç«¯ APIï¼‰
    â””â”€â†’ Netlify â†’ mellow-rabanadas-877f3e.netlify.appï¼ˆå‰ç«¯ï¼‰
```

**æµç¨‹**ï¼š
1. åœ¨æ²™ç›’å¼€å‘å’Œæµ‹è¯•
2. æ¨é€ä»£ç åˆ° GitHub
3. GitHub Actions è‡ªåŠ¨éƒ¨ç½²åç«¯åˆ°æœåŠ¡å™¨
4. Netlify è‡ªåŠ¨éƒ¨ç½²å‰ç«¯

---

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šåœ¨æ²™ç›’ç¯å¢ƒé…ç½® Git

### 1.1 æ£€æŸ¥ Git æ˜¯å¦å·²å®‰è£…

åœ¨æ²™ç›’ç»ˆç«¯æ‰§è¡Œï¼š

```bash
git --version
```

åº”è¯¥çœ‹åˆ°ç±»ä¼¼ `git version 2.x.x` çš„è¾“å‡ºã€‚

### 1.2 é…ç½® Git ç”¨æˆ·ä¿¡æ¯

```bash
git config --global user.name "ä½ çš„åå­—"
git config --global user.email "ä½ çš„é‚®ç®±"
```

ç¤ºä¾‹ï¼š
```bash
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
```

éªŒè¯é…ç½®ï¼š
```bash
git config --global --list
```

---

## ğŸ”— ç¬¬äºŒæ­¥ï¼šè¿æ¥ GitHub ä»“åº“

### 2.1 åˆ›å»º GitHub ä»“åº“

1. æ‰“å¼€ [GitHub](https://github.com/)
2. ç‚¹å‡»å³ä¸Šè§’çš„ **+** æŒ‰é’®
3. é€‰æ‹© **New repository**
4. å¡«å†™ä»“åº“ä¿¡æ¯ï¼š
   - **Repository name**: `restaurant-system`ï¼ˆæˆ–å…¶ä»–åç§°ï¼‰
   - **Description**: å¤šåº—é“ºæ‰«ç ç‚¹é¤ç³»ç»Ÿ
   - é€‰æ‹© **Public** æˆ– **Private**
   - **ä¸è¦** å‹¾é€‰ "Initialize this repository with a README"
   - **ä¸è¦** å‹¾é€‰ ".gitignore" æˆ– "license"
5. ç‚¹å‡» **Create repository**

### 2.2 åœ¨æ²™ç›’åˆå§‹åŒ– Git ä»“åº“

åœ¨æ²™ç›’ç»ˆç«¯æ‰§è¡Œï¼š

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /workspace/projects

# åˆå§‹åŒ– Git ä»“åº“
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ° Git
git add .

# é¦–æ¬¡æäº¤
git commit -m "feat: åˆå§‹åŒ–é¤é¥®ç‚¹é¤ç³»ç»Ÿ"
```

### 2.3 è¿æ¥åˆ° GitHub ä»“åº“

åœ¨ GitHub ä»“åº“é¡µé¢ï¼Œæ‰¾åˆ°ç±»ä¼¼è¿™æ ·çš„å‘½ä»¤ï¼ˆåœ¨ "â€¦or push an existing repository from the command line" ä¸‹é¢ï¼‰ï¼š

```bash
git remote add origin https://github.com/<ä½ çš„ç”¨æˆ·å>/<ä»“åº“å>.git
git branch -M main
git push -u origin main
```

**ç¤ºä¾‹**ï¼ˆæ›¿æ¢ä¸ºä½ çš„å®é™…ä¿¡æ¯ï¼‰ï¼š
```bash
git remote add origin https://github.com/yourusername/restaurant-system.git
git branch -M main
git push -u origin main
```

**å¦‚æœæç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç **ï¼š
- ç”¨æˆ·åï¼šGitHub ç”¨æˆ·å
- å¯†ç ï¼šä½¿ç”¨ **Personal Access Token**ï¼ˆä¸æ˜¯ GitHub å¯†ç ï¼‰

### 2.4 åˆ›å»º GitHub Personal Access Token

1. ç™»å½• GitHub
2. ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ **Settings**
3. å·¦ä¾§èœå• â†’ **Developer settings**
4. ç‚¹å‡» **Personal access tokens** â†’ **Tokens (classic)**
5. ç‚¹å‡» **Generate new token** â†’ **Generate new token (classic)**
6. é…ç½® tokenï¼š
   - **Note**: `Restaurant System Deploy`
   - **Expiration**: é€‰æ‹©è¿‡æœŸæ—¶é—´ï¼ˆå¦‚ 90 daysï¼‰
   - **Scopes**: å‹¾é€‰ä»¥ä¸‹æƒé™ï¼š
     - âœ… `repo`ï¼ˆå®Œæ•´ä»“åº“è®¿é—®æƒé™ï¼‰
     - âœ… `workflow`ï¼ˆGitHub Actionsï¼‰
7. ç‚¹å‡» **Generate token**
8. **é‡è¦**ï¼šå¤åˆ¶ç”Ÿæˆçš„ tokenï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼ï¼‰

**æ¨é€æ—¶ä½¿ç”¨ token ä»£æ›¿å¯†ç **ï¼š
```bash
git push -u origin main
# æç¤ºè¾“å…¥ç”¨æˆ·åï¼šyourusername
# æç¤ºè¾“å…¥å¯†ç ï¼šç²˜è´´ token
```

---

## âœ… ç¬¬ä¸‰æ­¥ï¼šéªŒè¯æ²™ç›’åˆ° GitHub çš„è¿æ¥

### 3.1 æ£€æŸ¥è¿œç¨‹ä»“åº“

```bash
git remote -v
```

åº”è¯¥çœ‹åˆ°ï¼š
```
origin  https://github.com/<ä½ çš„ç”¨æˆ·å>/<ä»“åº“å>.git (fetch)
origin  https://github.com/<ä½ çš„ç”¨æˆ·å>/<ä»“åº“å>.git (push)
```

### 3.2 æ¨é€æµ‹è¯•

ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼ˆä¾‹å¦‚ README.mdï¼‰ï¼Œç„¶åæ¨é€ï¼š

```bash
# ä¿®æ”¹æ–‡ä»¶
echo "# æµ‹è¯•æ›´æ–°" >> README.md

# æäº¤å¹¶æ¨é€
git add .
git commit -m "test: æµ‹è¯•æ¨é€"
git push origin main
```

ç„¶ååœ¨ GitHub ä»“åº“é¡µé¢æŸ¥çœ‹ï¼Œåº”è¯¥èƒ½çœ‹åˆ°æ›´æ–°çš„å†…å®¹ã€‚

---

## ğŸš€ ç¬¬å››æ­¥ï¼šé…ç½® GitHub Actionsï¼ˆåç«¯è‡ªåŠ¨éƒ¨ç½²ï¼‰

### 4.1 ç¡®è®¤å·¥ä½œæµæ–‡ä»¶å­˜åœ¨

åœ¨æ²™ç›’ç»ˆç«¯æ‰§è¡Œï¼š

```bash
ls -la .github/workflows/deploy.yml
```

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯´æ˜è¿˜æ²¡æœ‰åˆ›å»º GitHub Actions å·¥ä½œæµã€‚ä½†æ ¹æ®ä¹‹å‰çš„å¼€å‘ï¼Œè¿™ä¸ªæ–‡ä»¶åº”è¯¥å·²ç»å­˜åœ¨ã€‚

### 4.2 é…ç½® GitHub Secrets

æŒ‰ç…§ **[GITHUB_ACTIONS_STEP_BY_STEP.md](GITHUB_ACTIONS_STEP_BY_STEP.md)** æ–‡æ¡£é…ç½®ä»¥ä¸‹ Secretsï¼š

| Name | Value |
|------|-------|
| `SSH_PRIVATE_KEY` | æœåŠ¡å™¨ SSH ç§é’¥ |
| `SERVER_USER` | `root` |
| `SERVER_HOST` | `115.191.1.219` |

**æ³¨æ„**ï¼šè¿™äº› Secrets éœ€è¦åœ¨ GitHub ç½‘é¡µä¸Šé…ç½®ï¼Œä¸æ˜¯åœ¨æ²™ç›’ä¸­é…ç½®ã€‚

### 4.3 æµ‹è¯• GitHub Actions

æ¨é€ä»£ç è§¦å‘éƒ¨ç½²ï¼š

```bash
git add .
git commit -m "feat: æµ‹è¯• GitHub Actions è‡ªåŠ¨éƒ¨ç½²"
git push origin main
```

ç„¶ååœ¨ GitHub ä»“åº“é¡µé¢ï¼š
1. ç‚¹å‡» **Actions** æ ‡ç­¾
2. è§‚å¯Ÿå·¥ä½œæµæ‰§è¡Œæƒ…å†µ
3. ç­‰å¾…å·¥ä½œæµå®Œæˆï¼ˆç»¿è‰² âœ…ï¼‰

---

## ğŸŒ ç¬¬äº”æ­¥ï¼šé…ç½® Netlifyï¼ˆå‰ç«¯è‡ªåŠ¨éƒ¨ç½²ï¼‰

### 5.1 ç¡®è®¤ Netlify é…ç½®æ–‡ä»¶

åœ¨æ²™ç›’ç»ˆç«¯æ‰§è¡Œï¼š

```bash
ls -la netlify.toml
ls -la netlify-production.toml
```

è¿™äº›æ–‡ä»¶åº”è¯¥å·²ç»å­˜åœ¨ï¼Œå®šä¹‰äº† Netlify çš„éƒ¨ç½²é…ç½®ã€‚

### 5.2 è¿æ¥ Netlify åˆ° GitHub

**ç¬¬ä¸€æ¬¡é…ç½®**ï¼ˆåªéœ€è¦åšä¸€æ¬¡ï¼‰ï¼š

1. æ‰“å¼€ [Netlify](https://app.netlify.com/)
2. ç™»å½•æˆ–æ³¨å†Œè´¦å·
3. ç‚¹å‡» **Add new site** â†’ **Import an existing project**
4. é€‰æ‹© **GitHub**
5. æˆæƒ Netlify è®¿é—®ä½ çš„ GitHub ä»“åº“
6. é€‰æ‹©ä½ çš„ä»“åº“ï¼ˆå¦‚ `restaurant-system`ï¼‰
7. é…ç½®æ„å»ºè®¾ç½®ï¼š
   - **Build command**: ç•™ç©ºï¼ˆå› ä¸ºæˆ‘ä»¬ä½¿ç”¨æ‹–æ‹½éƒ¨ç½²ï¼‰
   - **Publish directory**: `.`ï¼ˆæ ¹ç›®å½•ï¼‰
   - **Branch to deploy**: `main`
8. ç‚¹å‡» **Deploy site**

**æ³¨æ„**ï¼šæ ¹æ®ä¹‹å‰çš„æ–‡æ¡£ï¼Œä½ å·²ç»ä½¿ç”¨æ‹–æ‹½éƒ¨ç½²æ–¹å¼éƒ¨ç½²åˆ°äº† Netlifyï¼ˆmellow-rabanadas-877f3e.netlify.appï¼‰ã€‚å¦‚æœå·²ç»éƒ¨ç½²è¿‡ï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ã€‚

### 5.2 é…ç½® Netlify ç¯å¢ƒå˜é‡

åœ¨ Netlify ä¸­é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š

1. æ‰“å¼€ Netlify æ§åˆ¶å°
2. é€‰æ‹©ä½ çš„ç«™ç‚¹
3. ç‚¹å‡» **Site settings**
4. ç‚¹å‡» **Environment variables**
5. ç‚¹å‡» **Add a variable**
6. æ·»åŠ å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœæœ‰ï¼‰

**å¯¹äºå½“å‰é¡¹ç›®**ï¼Œå‰ç«¯é€šè¿‡ API ä»£ç†è®¿é—®åç«¯ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨ Netlify ä¸­é…ç½®ç¯å¢ƒå˜é‡ã€‚

---

## ğŸ”„ ç¬¬å…­æ­¥ï¼šå®Œæ•´çš„å¼€å‘æµç¨‹

### æ—¥å¸¸å¼€å‘æµç¨‹ï¼ˆåœ¨æ²™ç›’ä¸­ï¼‰

```bash
# 1. åœ¨æ²™ç›’ä¸­å¼€å‘
# ç¼–è¾‘æ–‡ä»¶ã€æµ‹è¯•åŠŸèƒ½ç­‰

# 2. æäº¤æ›´æ”¹
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"

# 3. æ¨é€åˆ° GitHub
git push origin main

# 4. ç­‰å¾…è‡ªåŠ¨éƒ¨ç½²å®Œæˆ
# - GitHub Actions ä¼šè‡ªåŠ¨éƒ¨ç½²åç«¯åˆ°æœåŠ¡å™¨
# - Netlify ä¼šè‡ªåŠ¨éƒ¨ç½²å‰ç«¯
```

### æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€

**GitHub Actions**ï¼š
1. æ‰“å¼€ GitHub ä»“åº“
2. ç‚¹å‡» **Actions** æ ‡ç­¾
3. æŸ¥çœ‹å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€

**Netlify**ï¼š
1. æ‰“å¼€ Netlify æ§åˆ¶å°
2. é€‰æ‹©ä½ çš„ç«™ç‚¹
3. æŸ¥çœ‹ **Deploys** æ ‡ç­¾
4. æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€

---

## âœ… ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯éƒ¨ç½²

### 7.1 éªŒè¯åç«¯ API

åœ¨æµè§ˆå™¨è®¿é—®ï¼š

```
http://115.191.1.219:8000/api/health
```

åº”è¯¥çœ‹åˆ°å¥åº·æ£€æŸ¥ä¿¡æ¯ã€‚

### 7.2 éªŒè¯å‰ç«¯

åœ¨æµè§ˆå™¨è®¿é—®ï¼š

```
https://mellow-rabanadas-877f3e.netlify.app/
```

åº”è¯¥èƒ½çœ‹åˆ°é¤é¥®ç³»ç»Ÿçš„å‰ç«¯é¡µé¢ã€‚

### 7.3 æµ‹è¯•å®Œæ•´æµç¨‹

1. åœ¨ Netlify å‰ç«¯é¡µé¢æµ‹è¯•ç‚¹é¤åŠŸèƒ½
2. æ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸è°ƒç”¨åç«¯ API
3. éªŒè¯æ•°æ®æ˜¯å¦æ­£ç¡®ä¿å­˜å’Œæ˜¾ç¤º

---

## ğŸ“Š å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ²™ç›’ç¯å¢ƒ       â”‚
â”‚  - å¼€å‘ä»£ç      â”‚
â”‚  - æœ¬åœ°æµ‹è¯•     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ git push
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub         â”‚
â”‚  - ä»£ç ä»“åº“     â”‚
â”‚  - Actions      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub  â”‚ â”‚ Netlify â”‚
â”‚ Actions â”‚ â”‚         â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚           â”‚
     â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœåŠ¡å™¨  â”‚ â”‚ Netlify (å‰ç«¯)      â”‚
â”‚ 115.191 â”‚ â”‚ mellow-rabanadas    â”‚
â”‚ .1.219  â”‚ â”‚ -877f3e.netlify.app â”‚
â”‚ (åç«¯)  â”‚ â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¡ å·¥ä½œæµç¨‹æ€»ç»“

### å¼€å‘é˜¶æ®µï¼ˆåœ¨æ²™ç›’ï¼‰
```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç ï¼ˆå¦‚æœæœ‰å¤šäººåä½œï¼‰
git pull origin main

# 2. å¼€å‘å’Œæµ‹è¯•
# ç¼–è¾‘æ–‡ä»¶...

# 3. æäº¤æ›´æ”¹
git add .
git commit -m "æè¿°ä½ çš„æ›´æ”¹"

# 4. æ¨é€åˆ° GitHub
git push origin main

# 5. ç­‰å¾…è‡ªåŠ¨éƒ¨ç½²ï¼ˆçº¦ 2-5 åˆ†é’Ÿï¼‰
```

### éƒ¨ç½²é˜¶æ®µï¼ˆè‡ªåŠ¨å®Œæˆï¼‰
- **GitHub Actions** è‡ªåŠ¨éƒ¨ç½²åç«¯åˆ°æœåŠ¡å™¨
- **Netlify** è‡ªåŠ¨éƒ¨ç½²å‰ç«¯

### éªŒè¯é˜¶æ®µ
- è®¿é—®åç«¯ API: http://115.191.1.219:8000/api/health
- è®¿é—®å‰ç«¯: https://mellow-rabanadas-877f3e.netlify.app/

---

## â“ å¸¸è§é—®é¢˜

### Q1: Git æ¨é€å¤±è´¥ï¼Œæç¤ºè®¤è¯é”™è¯¯

**åŸå› **: GitHub å¯†ç ä¸å†æ”¯æŒï¼Œéœ€è¦ä½¿ç”¨ Personal Access Token

**è§£å†³**:
1. åˆ›å»º Personal Access Tokenï¼ˆå‚è€ƒä¸Šé¢çš„æ­¥éª¤ï¼‰
2. æ¨é€æ—¶ä½¿ç”¨ token ä»£æ›¿å¯†ç 

### Q2: GitHub Actions éƒ¨ç½²å¤±è´¥

**åŸå› **: GitHub Secrets é…ç½®é”™è¯¯

**è§£å†³**:
1. æ£€æŸ¥ GitHub Secrets æ˜¯å¦æ­£ç¡®é…ç½®
2. æ£€æŸ¥æœåŠ¡å™¨ SSH å¯†é’¥æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹ GitHub Actions æ—¥å¿—å®šä½é—®é¢˜

### Q3: Netlify å‰ç«¯æ— æ³•è·å–æ•°æ®

**åŸå› **: åç«¯æœåŠ¡å™¨æœªè¿è¡Œæˆ– API åœ°å€é…ç½®é”™è¯¯

**è§£å†³**:
1. æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œï¼š`systemctl status restaurant-api`
2. æ£€æŸ¥ netlify.toml ä¸­çš„ API ä»£ç†é…ç½®
3. ç¡®è®¤åç«¯æœåŠ¡å™¨ IP: 115.191.1.219:8000

### Q4: å¦‚ä½•æ’¤é”€é”™è¯¯çš„éƒ¨ç½²

**GitHub Actions**:
```bash
# åœ¨æœåŠ¡å™¨ä¸Šå›æ»š
cd /workspace/projects
git log --oneline -5
git reset --hard <ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„æäº¤å·>
bash scripts/auto_deploy.sh
```

**Netlify**:
1. æ‰“å¼€ Netlify æ§åˆ¶å°
2. ç‚¹å‡» **Deploys** æ ‡ç­¾
3. æ‰¾åˆ°ä¹‹å‰çš„éƒ¨ç½²è®°å½•
4. ç‚¹å‡» **Publish deploy** é‡æ–°å‘å¸ƒ

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [GitHub Actions ä¸€æ­¥ä¸€æ­¥æ•™ç¨‹](GITHUB_ACTIONS_STEP_BY_STEP.md)
- [GitHub Secrets é…ç½®æŒ‡å—](GITHUB_SECRETS_SETUP.md)
- [Netlify éƒ¨ç½²æŒ‡å—](NETLIFY_DEPLOYMENT.md)
- [å¿«é€Ÿå‘½ä»¤æ¸…å•](QUICK_COMMANDS.md)

---

## ğŸ‰ å®Œæˆï¼

ç°åœ¨ä½ å·²ç»é…ç½®å¥½äº†å®Œæ•´çš„å¼€å‘æµç¨‹ï¼š

1. âœ… åœ¨æ²™ç›’å¼€å‘
2. âœ… æ¨é€åˆ° GitHub
3. âœ… è‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼ˆåç«¯ï¼‰
4. âœ… è‡ªåŠ¨éƒ¨ç½²åˆ° Netlifyï¼ˆå‰ç«¯ï¼‰

ä»¥åæ¯æ¬¡æ¨é€ä»£ç ï¼Œå°±ä¼šè‡ªåŠ¨å®Œæˆæ•´ä¸ªéƒ¨ç½²æµç¨‹ï¼ğŸš€

---

**ç¥ä½ å¼€å‘æ„‰å¿«ï¼**
